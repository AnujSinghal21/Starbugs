{% extends 'health/base.html' %}
{% load static%}
{%block content%}
<!DOCTYPE html>
<html>
    <head>
        <title>Health++</title> 
        <link rel="icon" href="./images/favicon.ico">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head>
    <body>
        <div>
            {% if flag%}
            <div id="alert-messages" class="alert alert-warning alert-dismissible fade show">
                An error occured
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endif%}
            <div class="container-sm mx-6 mt-5">
                <h3 style='color: blue; margin-bottom: 20px; text-align: center; margin-right: 30px;'>
                    Blood Donation Request Form
                </h3>
                <form action="{% url 'submitblood' %}" method="post" class="card p-3  ml-5 mr-5" style='font-weight:400;background: linear-gradient(rgb(252, 47, 47), rgb(234, 128, 128));'>
                    {% csrf_token %}
                    <div class="form-group row">
                        <div class="col-md-12 col-lg-2 ">
                            <label>
                                <div class=" mt-2 text-white">Requester </div>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-8 " method="post">
                        <input type="text" name="name" class="form-control float-left" placeholder="Name"></input>
                    </div>
                    <div class="form-group row ">
                        <div class="col-md-12 col-lg-2">
                            <label>
                                <div class="mt-2 text-white">Volume Reqired</div>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-8 " method="post">
                        <input type="integer" required="True" name="volume" class="form-control float-left" placeholder="Please Enter (Integer Only)"></input>
                    </div>
                    <div class="form-group row ">
                        <div class="col-md-12 col-lg-2 ">
                            <label>
                                <div class=" mt-2 text-white">Blood Group</div>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-8" method="post">
                        <select name="bloodgrp" class="form-select">
                            <option value="A+">A+</option>
                            <option value="O+">O+</option>
                            <option value="B+">B+</option>
                            <option value="AB+">AB+</option>
                            <option value="A-">A-</option>
                            <option value="O-">O-</option>
                            <option value="B-">B-</option>
                            <option value="AB-">AB-</option>
                          </select>
                    </div>
                    <div class="form-group" method="post">
                        <label class="text-white">Description</label>
                        <textarea name="text" class="form-control text-left" rows="3"></textarea>
                    </div>
                    <div class="mt-4 text-center">
                        <button type="button" onclick="submit()" class="btn btn-lg text-white" style='background-color: #ff0000'>
                            Submit Form
                        </button>
                    </div>
                </form>
            </div>
            <div class="mt-5">
                <h3 style='color: blue;margin-bottom:20px; text-align:center;margin-left:30px;'>Open Blood Donation Requests</h3> 
                <div class="table-responsive">

                    <form method="post" action="{% url 'donate' %}">
                        {% csrf_token %}
                        <table class="table table-bordered table-hover">
                               <thead class="table-primary">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Requester's Name </th>
                                    <th scope="col">Blood Group </th>
                                    <th scope="col">Volume Required</th>
                                    <th scope="col">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for r in rows %} 
                                <tr>
                                    <!-- <td className="font-weight-bold">{{r.id}}</td> -->
                                    <td className="font-weight-bold">{{ forloop.counter }}</td>
                                    <td class="text-primary">{{r.name}}</td>
                                    <td>{{r.blood_group}}</td>
                                    <td>{{r.volume}}</td>
                                    <td><p>{{r.description}}</p></td>
                                </tr> 
                                {% endfor %}                             
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    </body>
</html>
{% endblock %}